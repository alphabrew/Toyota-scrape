from bs4 import BeautifulSoup
import requests
import pandas as pd

dealers=[
    '355toyota',
    'adamstoyota',
    'andersontoyotaaz',
    'andrewtoyota',
    'aubreyalexandertoyota',
    'autonationtoyotatempe',
    'avondaletoyota',
    'baierltoyota',
    'beavertoyotastaugustine',
    'bellroadtoyota',
    'bigtwotoyota',
    'billpenneytoyota',
    'bommaritotoyota',
    'bondystoyota',
    'brewerairporttoyota',
    'brownstoyota',
    'buttetoyota',
    'camelbacktoyota',
    'cobbcountytoyota',
    'conicellitoyotaofspringfield',
    'crowntoyota',
    'dandeerytoyota',
    'darcarstoyota',
    'darcarstoyotaofbaltimore',
    'darcarstoyotaoffrederick',
    'daytonatoyota',
    'delucatoyota',
    'deserttoyota',
    'earnhardttoyota',
    'easternshoretoyota',
    'eastmadisontoyota',
    'elmoretoyota',
    'erniepalmertoyota',
    'evanstoyota',
    'findlaytoyotaprescott',
    'foothillstoyota',
    'frankforttoyota',
    'fredandersontoyota',
    'ganleytoyota',
    'germaintoyotaofnaples',
    'greenstoyotaoflexington',
    'hamertoyota',
    'hatchtoyota',
    'heartlandtoyota',
    'hendricktoyotaapex',
    'hendricktoyotaconcord',
    'hickorytoyota',
    'hoovertoyota',
    'invergrovetoyota',
    'jimcolemantoyota',
    'jimellistoyota',
    'josephtoyota',
    'kendalltoyotaofanchorage',
    'kendalltoyotaoffairbanks',
    'kerrytoyota',
    'kingstoyota',
    'koch33toyota',
    'larrymillertoyota',
    'lewistoyota',
    'lhmtoyotalemongrove',
    'limbaughtoyota',
    'lithiatoyotabillings',
    'loyaltytoyotarichmond',
    'lynchtoyotaofauburn',
    'maderatoyota',
    'maitatoyota',
    'mariettatoyota',
    'mcgeetoyotaofdudley',
    'mcgeorgetoyota',
    'mckinnontoyota',
    'mendenhalltoyota',
    'metrotoyota',
    'miltonrubentoyota',
    'miracletoyota',
    'myalexandertoyota',
    'newboldtoyota',
    'oxmoortoyota',
    'palmerstoyota',
    'passporttoyota',
    'prestigetoyota',
    'prestigetoyota-ny',
    'pretoy',
    'puentehillstoyota',
    'reinhardtmotors',
    'reinhardttoyota',
    'righttoyota',
    'rivertowntoyota',
    'riverviewtoyota',
    'rogersandrogerstoyota',
    'rohrichtoyota',
    'rosevilletoyota',
    'salinastoyota',
    'sandmountaintoyota',
    'savannahtoyota',
    'schaumburgtoyota',
    'scottcrumptoyota',
    'serratoyota',
    'sftoyota',
    'sheehytoyotafredericksburg',
    'sierratoyota-az',
    'southdadetoyota',
    'sparkstoyota',
    'springhilltoyota',
    'stcharlestoyota',
    'stcloudtoyota',
    'stevenscreektoyota',
    'stevinsontoyotaeast',
    'stevinsontoyotawest',
    'sullivanbrotherstoyota',
    'sunnykingtoyota',
    'sunrisetoyota',
    'teamonetoyota',
    'teamtoyotaglenmills',
    'tonydivinotoyota',
    'toyota',
    'toyotaofdecatur',
    'toyotaofdeerfieldbeach',
    'toyotaofdothan',
    'toyotaofelcajon',
    'toyotaofgladstone',
    'toyotaofgreenville',
    'toyotaoflakecity',
    'toyotaoflouisville',
    'toyotaofnorthmiami',
    'toyotaofredlands',
    'toyotaofscranton',
    'toyotaofsurprise',
    'toyotaofsylacauga',
    'toyotaoftheshoals',
    'toyotaofwilmington',
    'toyotapaloalto',
    'toyotawc',
    'treasurecoasttoyotaofstuart',
    'tuscaloosatoyota',
    'tustintoyota',
    'tvtoyota',
    'venturatoyota',
    'villagetoyota',
    'waldorftoyota',
    'walkertoyota',
    'westcoasttoyotalb',
    'westkendalltoyota',
]

gooddealers=[]
prices=[]
urls=[]
input_url='https://parts.lakelandtoyota.com/p/__/Engine-Variable-Valve-Timing-VVT-Solenoid/3926105/153300P010.html'
url= input_url.split(".")
base_url=str(url[0])+".{}."+str(url[2]+"."+str(url[3]))
for dealer in dealers:
    try:
        url=base_url.format(dealer)
        text=requests.get(url).text
        soup= BeautifulSoup(text, 'html5lib')
        gooddealers.append(dealer)
        prices.append(float(soup.select('.productPriceSpan')[0].text.split()[0][1:]))
        urls.append(url)
    except:
        pass

df= pd.DataFrame(zip(gooddealers, prices, urls), columns= ['dealer', 'price', 'url']).set_index('dealer')
df.sort_values(['price'], inplace=True)
df.to_csv('part_data.csv')
